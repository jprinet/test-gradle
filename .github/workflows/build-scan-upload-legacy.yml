name: Upload PR Build Scans - LEGACY

on:
  workflow_run:
    workflows: [ "PR Build" ]
    types: [ completed ]
  issue_comment:
    types: [ created ]

jobs:

  publish-build-scan:
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
      - name: Verify terms of service approval
        uses: gradle/github-actions/terms-of-service-acceptance/verify@v0.2
        with:
          workflow-job-name: 'run-terms-of-service-approval'
      - name: Debug step
        run: |
          echo "validated"
          exit 1
      - name: Publish Maven Build Scans
        uses: gradle/github-actions/maven/build-scan-publish@v0.2
        with:
          gradle-enterprise-url: 'https://ge.solutions-team.gradle.com'
          gradle-enterprise-extension-version: ${{ matrix.version }}
          gradle-enterprise-access-key: ${{ secrets.GE_SOLUTIONS_ACCESS_TOKEN }}
          pull-request-number: ${{ needs.load-metadata.outputs.pull-request-number }}
